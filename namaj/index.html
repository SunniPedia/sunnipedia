<!DOCTYPE html>

<html lang="bn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>নামাযের সময়সূচি</title>

<!-- CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/style.css">
<link rel="icon" href="assets/mecca 16x16.png" type="image/gif">

<!-- SolaimanLipi Font -->
<style>
	@font-face {
		font-family: 'SolaimanLipi';
		src: url('fonts/SolaimanLipi.ttf') format('truetype');
		font-weight: normal;
		font-style: normal;
	}

	body {
		font-family: 'SolaimanLipi', sans-serif;
	}

	#divShowPrayTimes {
		text-align: center;
	}
</style>

</head>
<body>
	<div class="container-fluid">
		<div class="row bg-warning p-2" id="notification_panel">
			<div class="container">
				<p class="m-0 text-center text-muted" id="notification_message">নোটিফিকেশন বার্তা এখানে</p>
			</div>
		</div><div class="row justify-content-center">
		<div class="col-12 col-md-6 p-4">

			<!-- Language Selector -->
			<div class="btn-group btn-group-sm btn-group-toggle mb-3" data-toggle="buttons">
				<label class="btn btn-secondary" id="btn-en">
					<input type="radio" name="lang" value="en" autocomplete="off"> English
				</label>
				<label class="btn btn-secondary active" id="btn-bn">
					<input type="radio" name="lang" value="bn" autocomplete="off" checked> বাংলা
				</label>
			</div>

			<div class="card">
				<div class="card-header">
					<h5 class="card-title mb-1" id="table_header_title">নামাযের সময়সূচি</h5>
					<p id="currentDateTime">বর্তমান সময়</p>
				</div>
				<div class="card-body">
					<div id="divShowPrayTimes">নামাযের সময় এখানে দেখানো হবে</div>
				</div>
			</div>
			<small class="text-muted d-block text-center p-2" id="footer_note">* হাইলাইট করা সারিটি বর্তমান ওয়াক্ত নির্দেশ করে</small>
		</div>
	</div>
</div>

<!-- JS Scripts -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="js/bootstrap/popper.min.js"></script>
<script src="js/bootstrap/bootstrap.min.js"></script>
<script src="js/moment-with-locales.min.js"></script>
<script src="js/PrayTimes.js"></script>

<script>
	// Default language
	let currentLang = 'bn';

	const translations = {
		en: {
			header: "Prayer Times",
			currentTime: "Current Time",
			footer: "* Highlighted row defines the current waqt",
			notification: "Notification message here"
		},
		bn: {
			header: "নামাযের সময়সূচি",
			currentTime: "বর্তমান সময়",
			footer: "* হাইলাইট করা সারিটি বর্তমান ওয়াক্ত নির্দেশ করে",
			notification: "নোটিফিকেশন বার্তা এখানে"
		}
	};

	function updateLanguage(lang) {
		currentLang = lang;
		const t = translations[lang];
		document.getElementById("table_header_title").innerText = t.header;
		document.getElementById("currentDateTime").innerText = t.currentTime;
		document.getElementById("footer_note").innerText = t.footer;
		document.getElementById("notification_message").innerText = t.notification;

		// moment.js locale
		moment.locale(lang === 'bn' ? 'bn' : 'en');
		// এখান থেকে আপনি টাইম ও তারিখ ফর্ম্যাট করতে পারেন moment.js দিয়ে
	}

	// Language switch handlers
	document.getElementById("btn-en").addEventListener("click", () => {
		updateLanguage('en');
		document.getElementById("btn-en").classList.add("active");
		document.getElementById("btn-bn").classList.remove("active");
	});

	document.getElementById("btn-bn").addEventListener("click", () => {
		updateLanguage('bn');
		document.getElementById("btn-bn").classList.add("active");
		document.getElementById("btn-en").classList.remove("active");
	});

	// Initial Load
	updateLanguage(currentLang);
</script>

<script>
	// Utility: ইংরেজি সংখ্যা → বাংলা সংখ্যা
	function toBanglaNumber(num) {
		const banglaDigits = ['০','১','২','৩','৪','৫','৬','৭','৮','৯'];
		return num.toString().split('').map(n => banglaDigits[n] || n).join('');
	}

	// Utility: বাংলা মাস নাম
	const banglaMonths = ["জানুয়ারি", "ফেব্রুয়ারি", "মার্চ", "এপ্রিল", "মে", "জুন", "জুলাই", "আগস্ট", "সেপ্টেম্বর", "অক্টোবর", "নভেম্বর", "ডিসেম্বর"];
	const hijriMonthsBn = ["মুহাররাম", "সফর", "রবিউল আউয়াল", "রবিউস সানি", "জুমাদাল উলা", "জুমাদাস সানি", "রজব", "শাবান", "রমযান", "শাওয়াল", "জিলক্বদ", "জিলহজ্জ"];

	// তারিখ হালনাগাদ ফাংশন
	async function updateDateInfo() {
	const today = new Date();
	const day = today.getDate();
	const month = today.getMonth();
	const year = today.getFullYear();

	const formattedDate = `${day}-${month + 1}-${year}`;

	try {
		const response = await fetch(`https://api.aladhan.com/v1/gToH?date=${formattedDate}`);
		const data = await response.json();

		console.log("Hijri API Response:", data);  // debug line

		if (data && data.data && data.data.hijri) {
			const hijri = data.data.hijri;
			const hijriDay = toBanglaNumber(hijri.day);
			const hijriMonth = hijriMonthsBn[hijri.month.number - 1];
			const hijriYear = toBanglaNumber(hijri.year);

			const banglaDate = `${toBanglaNumber(day)} ${banglaMonths[month]} ${toBanglaNumber(year)}`;
			const hijriDate = `${hijriDay} ${hijriMonth} ${hijriYear} হিজরি`;

			document.getElementById('currentDateTime').innerText = `${banglaDate} | ${hijriDate}`;
		} else {
			throw new Error("Hijri data missing");
		}
	} catch (error) {
		console.error("হিজরি তারিখ আনতে সমস্যা হয়েছে:", error);
		document.getElementById('currentDateTime').innerText = "তারিখ লোড করা যায়নি";
	}
}

	// প্রথমবার চালানো
	updateDateInfo();
</script><script src="js/app.js"></script>

</body>
</html>